(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{INhW:function(e,r,t){"use strict";t.r(r),t.d(r,"TriggerModule",function(){return pe});var i=t("ofXK"),o=t("tyNb"),s=t("itXk"),c=t("vkgz"),n=t("Kj3r"),a=t("/uUt"),b=t("pLZG"),g=t("eIep"),l=t("w1tV"),p=t("lJxs"),m=t("3Pt+"),d=t("g0x3");class u{constructor(e){this._formBuilder=e}InitForm(){return this._formBuilder.group({server:new d.a.CreateServer(this._formBuilder).InItForm(),triggerName:[null,[m.q.required]],processName:["",[m.q.required]],processType:["",[m.q.required]],processInputs:(new m.d).array([])})}initProcessInputRows(e,r){return this._formBuilder.group({name:[e,m.q.required],value:[r]})}}var f=t("gR9L"),h=t("fXoL"),v=t("tk/3"),w=t("JIr8"),y=t("IzEk"),K=t("z6cu"),L=t("V73k");let N=(()=>{class e{constructor(e){this._http=e}GetAllDeployedProcesses(e,r){console.log("Entered in Services");const t=(new v.e).set("serverName",e);return r&&t.set("processName",r),this._http.get(L.b.API_URL,{params:t}).pipe(Object(p.a)(e=>e.processes),Object(w.a)(this.errorHandler),Object(l.a)())}GetAllDeployedProcessesWithInputParams(e,r){console.log("Entered in Services");const t=(new v.e).set("serverName",e).set("processName",r);return this._http.get(L.b.API_URL+"processes/",{params:t}).pipe(Object(p.a)(e=>e.processInfos),Object(p.a)(e=>e[0]),Object(l.a)(),Object(y.a)(1))}GetAllTypesToProcessMappings(e){const r=(new v.e).set("serverName",e);return this._http.get(L.b.API_URL+"mappings/",{params:r}).pipe(Object(w.a)(this.errorHandler),Object(l.a)())}errorHandler(e){return console.error(e),Object(K.a)(e.error||"Server Error")}}return e.\u0275fac=function(r){return new(r||e)(h.Pb(v.b))},e.\u0275prov=h.Cb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=t("E/ta"),I=t("G11K"),S=t("4Kj8");function O(e,r){if(1&e&&(h.Lb(0,"option",35),h.oc(1),h.Kb()),2&e){const e=r.$implicit;h.cc("value",e.serverName),h.wb(1),h.qc(" ",e.serverName," ")}}function P(e,r){1&e&&(h.Lb(0,"app-spinner",36),h.oc(1,"Select Server First..."),h.Kb())}function F(e,r){1&e&&(h.Lb(0,"app-spinner",36),h.oc(1,"Fetching process types..."),h.Kb())}function _(e,r){if(1&e&&(h.Lb(0,"option",35),h.oc(1),h.Kb()),2&e){const e=r.$implicit;h.cc("value",e.key),h.wb(1),h.qc(" ",e.key," ")}}function j(e,r){if(1&e&&(h.Lb(0,"select",37),h.Lb(1,"option",16),h.oc(2,"Select a process type..."),h.Kb(),h.mc(3,_,2,2,"option",17),h.Xb(4,"keyvalue"),h.Kb()),2&e){const e=r.ngIf;h.wb(3),h.cc("ngForOf",h.Yb(4,1,e))}}function C(e,r){1&e&&(h.Lb(0,"app-spinner",36),h.oc(1,"Select Server First..."),h.Kb())}function $(e,r){1&e&&(h.Lb(0,"app-spinner",36),h.oc(1,"Fetching version..."),h.Kb())}function x(e,r){1&e&&h.Hb(0,"input",38)}function A(e,r){1&e&&(h.Lb(0,"app-spinner",36),h.oc(1,"Select process type First..."),h.Kb())}function k(e,r){if(1&e&&(h.Lb(0,"option",35),h.oc(1),h.Kb()),2&e){const e=r.$implicit;h.cc("value",e),h.wb(1),h.qc(" ",e," ")}}function G(e,r){if(1&e&&(h.Lb(0,"select",39),h.Lb(1,"option",16),h.oc(2,"Select a process..."),h.Kb(),h.mc(3,k,2,2,"option",17),h.Kb()),2&e){const e=r.ngIf;h.wb(3),h.cc("ngForOf",e)}}function X(e,r){if(1&e){const e=h.Mb();h.Lb(0,"div",42),h.Lb(1,"div",5),h.Lb(2,"div",43),h.Hb(3,"textarea",44),h.Kb(),h.Lb(4,"div",45),h.Hb(5,"textarea",46),h.Kb(),h.Lb(6,"div",47),h.Lb(7,"i",48),h.Sb("click",function(){h.jc(e);const t=r.index;return h.Wb(3).deleteProcessInput(t)}),h.Kb(),h.Kb(),h.Kb(),h.Kb()}2&e&&h.cc("formGroupName",r.index)}function Y(e,r){if(1&e&&(h.Lb(0,"div",5),h.Lb(1,"div",40),h.mc(2,X,8,1,"div",41),h.Kb(),h.Kb()),2&e){const e=h.Wb(2);h.wb(2),h.cc("ngForOf",e.formsArr.controls)}}const E=function(e,r){return{"form-valid":e,"form-invalid":r}};function B(e,r){if(1&e){const e=h.Mb();h.Lb(0,"div",3),h.Lb(1,"form",4),h.Lb(2,"div",5),h.Hb(3,"div",6),h.Lb(4,"div",7),h.Lb(5,"div",5),h.Lb(6,"div",8),h.Lb(7,"label",9),h.oc(8,"Trigger Name"),h.Kb(),h.Hb(9,"input",10),h.Kb(),h.Lb(10,"div",11),h.Lb(11,"div",12),h.Lb(12,"div",13),h.Lb(13,"label",14),h.oc(14,"Server Name"),h.Kb(),h.Lb(15,"select",15),h.Lb(16,"option",16),h.oc(17,"Select a server..."),h.Kb(),h.mc(18,O,2,2,"option",17),h.Kb(),h.Kb(),h.Kb(),h.Lb(19,"div",18),h.Lb(20,"label",19),h.oc(21,"Process Type"),h.Kb(),h.mc(22,P,2,0,"app-spinner",20),h.Xb(23,"async"),h.mc(24,F,2,0,"app-spinner",20),h.Xb(25,"async"),h.Xb(26,"async"),h.mc(27,j,5,3,"select",21),h.Xb(28,"async"),h.Xb(29,"async"),h.Kb(),h.Kb(),h.Lb(30,"div",11),h.Lb(31,"div",12),h.Lb(32,"div",22),h.Lb(33,"label",23),h.oc(34,"Blue Prism Version"),h.Kb(),h.mc(35,C,2,0,"app-spinner",20),h.Xb(36,"async"),h.mc(37,$,2,0,"app-spinner",20),h.Xb(38,"async"),h.Xb(39,"async"),h.mc(40,x,1,0,"input",24),h.Xb(41,"async"),h.Kb(),h.Kb(),h.Lb(42,"div",25),h.Lb(43,"label",26),h.oc(44,"Process Name"),h.Kb(),h.mc(45,A,2,0,"app-spinner",20),h.Xb(46,"async"),h.mc(47,G,4,1,"select",27),h.Xb(48,"async"),h.Xb(49,"async"),h.Kb(),h.Kb(),h.Kb(),h.Lb(50,"div",28),h.Lb(51,"div",29),h.Lb(52,"div",30),h.oc(53,"Process Inputs"),h.Kb(),h.Kb(),h.Lb(54,"div",29),h.Lb(55,"button",31),h.Sb("click",function(){return h.jc(e),h.Wb().addProcessInput("","")}),h.oc(56," Add new Input "),h.Kb(),h.Kb(),h.Kb(),h.mc(57,Y,3,1,"div",32),h.Xb(58,"async"),h.Lb(59,"div",33),h.Lb(60,"button",34),h.Sb("click",function(){return h.jc(e),h.Wb().AddTrigger()}),h.oc(61," Save "),h.Kb(),h.Kb(),h.Kb(),h.Hb(62,"div",6),h.Kb(),h.Kb(),h.Kb()}if(2&e){const e=r.ngIf,t=h.Wb();h.wb(1),h.cc("formGroup",t.createTriggerForm),h.wb(17),h.cc("ngForOf",e),h.wb(4),h.cc("ngIf",!h.Yb(23,15,t.selectedServerName$)),h.wb(2),h.cc("ngIf",h.Yb(25,17,t.selectedServerName$)&&!h.Yb(26,19,t.allMappings$)),h.wb(3),h.cc("ngIf",h.Yb(28,21,t.selectedServerName$)&&h.Yb(29,23,t.allMappings$)),h.wb(8),h.cc("ngIf",!h.Yb(36,25,t.selectedServerName$)),h.wb(2),h.cc("ngIf",h.Yb(38,27,t.selectedServerName$)&&!h.Yb(39,29,t.selectedServer$)),h.wb(3),h.cc("ngIf",h.Yb(41,31,t.selectedServer$)),h.wb(5),h.cc("ngIf",!h.Yb(46,33,t.selectedProcessType$)),h.wb(2),h.cc("ngIf",h.Yb(48,35,t.selectedServerName$)&&h.Yb(49,37,t.mappedProcesses$)),h.wb(8),h.cc("disabled",t.createTriggerForm.invalid)("ngClass",h.fc(41,E,!t.createTriggerForm.invalid,t.createTriggerForm.invalid)),h.wb(2),h.cc("ngIf",h.Yb(58,39,t.processDetails$)),h.wb(3),h.cc("disabled",t.createTriggerForm.invalid)("ngClass",h.fc(44,E,!t.createTriggerForm.invalid,t.createTriggerForm.invalid))}}function H(e,r){1&e&&(h.Lb(0,"app-spinner",49),h.oc(1),h.Kb()),2&e&&(h.cc("spinnerColor","#428bca")("spinnerSize","1.5rem"),h.wb(1),h.pc(" Fetching data from backend....."))}let q=(()=>{class e{constructor(e,r,t,i,o){this._router=e,this._apiService=r,this._formBuilder=t,this._serversService=i,this._triggersService=o}ngOnInit(){this.createTriggerForm=new u(this._formBuilder).InitForm(),this.allServers$=this._serversService.GetAllServers$(),this.selectedServerName$=this.createTriggerForm.controls.server.controls.serverName.valueChanges,this.selectedServer$=this.selectedServerName$.pipe(Object(c.a)(e=>{this.createTriggerForm.patchValue({processType:""})}),Object(n.a)(500),Object(a.a)(),Object(b.a)(e=>""!==e),Object(g.a)(e=>this._serversService.GetServerByServerName(e)),Object(l.a)()),this.allMappings$=this.selectedServer$.pipe(Object(c.a)(e=>{this.deleteAllProcessInputs(),this.createTriggerForm.controls.server.patchValue(Object.assign({},e))}),Object(g.a)(e=>this._apiService.GetAllTypesToProcessMappings(e.serverName)),Object(l.a)()),this.selectedProcessType$=this.createTriggerForm.controls.processType.valueChanges,this.mappedProcesses$=Object(s.a)([this.selectedProcessType$,this.allMappings$]).pipe(Object(c.a)(e=>{this.createTriggerForm.patchValue({processName:""}),this.deleteAllProcessInputs()}),Object(p.a)(([e,r])=>r[e]),Object(l.a)()),this.selectedProcessName$=this.createTriggerForm.controls.processName.valueChanges,this.processDetails$=Object(s.a)([this.selectedServer$,this.selectedProcessName$]).pipe(Object(c.a)(e=>this.deleteAllProcessInputs()),Object(g.a)(([e,r])=>this._apiService.GetAllDeployedProcessesWithInputParams(e.serverName,r)),Object(c.a)(e=>e.processInputs.forEach(e=>this.addProcessInput(e,""))),Object(l.a)())}get formsArr(){return this.createTriggerForm.get("processInputs")}addProcessInput(e,r){this.formsArr.push(new u(this._formBuilder).initProcessInputRows(e,r))}deleteAllProcessInputs(){if(this.formsArr.length>0)for(;0!==this.formsArr.length;)this.formsArr.removeAt(0)}deleteProcessInput(e){this.formsArr.removeAt(e)}AddTrigger(){this.addTriggerSubs=this._triggersService.AddTrigger(this.createTriggerForm.value).subscribe(e=>{this._router.navigate([f.a.getRoutePathByName("trigger-view-all")])},e=>{console.log(e),alert(e.message)})}ngOnDestroy(){this.addTriggerSubs&&this.addTriggerSubs.unsubscribe()}}return e.\u0275fac=function(r){return new(r||e)(h.Gb(o.f),h.Gb(N),h.Gb(m.d),h.Gb(T.a),h.Gb(I.a))},e.\u0275cmp=h.Ab({type:e,selectors:[["app-create-trigger"]],hostBindings:function(e,r){1&e&&h.Sb("beforeunload",function(){return r.ngOnDestroy()},!1,h.ic)},decls:5,vars:6,consts:[[1,"create-trigger"],["class","form-wrapper mt-3",4,"ngIf"],[3,"spinnerColor","spinnerSize",4,"ngIf"],[1,"form-wrapper","mt-3"],[3,"formGroup"],[1,"row"],[1,"col-md-1"],[1,"col-md-10"],[1,"form-group","triggerName"],["for","triggerName",1,"form-label","required"],["id","triggerName","name","triggerName","formControlName","triggerName",1,"form-control","highlight"],[1,"col-md-6"],["formGroupName","server"],[1,"form-group","serverName"],["for","serverName",1,"form-label","required"],["id","serverName","name","serverName","formControlName","serverName",1,"form-control","highlight"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","processType"],["for","processType",1,"form-label","required"],["class","form-control highlight","spinnerColor","#428bca",4,"ngIf"],["id","processType","name","processType","class","form-control highlight","formControlName","processType",4,"ngIf"],[1,"form-group","version"],["for","version",1,"form-label","required"],["id","version","name","version","class","form-control highlight","formControlName","version",4,"ngIf"],[1,"form-group","processName"],["for","processName",1,"form-label","required"],["id","processName","name","processName","class","form-control highlight","formControlName","processName",4,"ngIf"],[1,"row","form-group"],[1,"col-md-6","col-sm-12"],[1,"form-heading"],["type","button",1,"btn","btn-success","pull-right",3,"disabled","ngClass","click"],["class","row",4,"ngIf"],[1,"form-group"],["type","submit",1,"btn","btn-primary",3,"disabled","ngClass","click"],[3,"value"],["spinnerColor","#428bca",1,"form-control","highlight"],["id","processType","name","processType","formControlName","processType",1,"form-control","highlight"],["id","version","name","version","formControlName","version",1,"form-control","highlight"],["id","processName","name","processName","formControlName","processName",1,"form-control","highlight"],["formArrayName","processInputs",1,"form-group"],["class","form-group",3,"formGroupName",4,"ngFor","ngForOf"],[1,"form-group",3,"formGroupName"],[1,"col-sm-4"],["type","text","formControlName","name",1,"form-control","highlight"],[1,"col-sm-7"],["formControlName","value",1,"form-control","highlight"],[1,"col-sm-1"],["type","button",1,"fa","fa-remove","text-center",3,"click"],[3,"spinnerColor","spinnerSize"]],template:function(e,r){1&e&&(h.Lb(0,"div",0),h.mc(1,B,63,47,"div",1),h.Xb(2,"async"),h.mc(3,H,2,3,"app-spinner",2),h.Xb(4,"async"),h.Kb()),2&e&&(h.wb(1),h.cc("ngIf",h.Yb(2,2,r.allServers$)),h.wb(2),h.cc("ngIf",!h.Yb(4,4,r.allServers$)))},directives:[i.n,m.s,m.j,m.f,m.b,m.i,m.e,m.g,m.p,m.l,m.r,i.m,i.l,S.a,m.c],pipes:[i.b,i.h],styles:[""]}),e})();var D=t("rRiM"),W=t("neec");let M=(()=>{class e{transform(e,...r){return"number"==typeof e?e.toString():e.serverName||"NA"}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=h.Fb({name:"bpServerName",type:e,pure:!0}),e})(),R=(()=>{class e{constructor(e,r,t){this._router=e,this._triggersService=r,this._schedulesService=t,this.deletedTrigger=new h.n}ngOnInit(){}EditTrigger(e){this._triggersService.trigger=e,this._router.navigate([f.a.getRoutePathByName("trigger-home"),e.id,"edit"])}ViewTrigger(e){this._triggersService.trigger=e,this._router.navigate([f.a.getRoutePathByName("trigger-home"),e.id,"view"])}DeleteTrigger(e){confirm(`Do you want to delete the Trigger with name ${e.triggerName} ?\n\nThis will delete all the entities using this trigger i.e Schedules, Execution, etc.`)&&(this.deleteTriggerSubs=this._triggersService.DeleteTrigger(e.id).subscribe(e=>{this.deletedTrigger.emit(e)},e=>{console.log(e)}))}ExecuteTrigger(e){const r={id:0,status:"",occurOnceDateTime:null,recurringEndDate:null,recurringStartDate:null,recurringTime:null,recurringType:"Now",scheduleName:"Now",trigger:e.id,userName:JSON.parse(sessionStorage.getItem("userToken")||"").user.username};this.addScheduleSubs=this._schedulesService.AddSchedule(r).subscribe(e=>{this._router.navigate([f.a.getRoutePathByName("schedule-view"),"all"])},e=>{console.log(e)})}ngOnDestroy(){this.deleteTriggerSubs&&this.deleteTriggerSubs.unsubscribe(),this.addScheduleSubs&&this.addScheduleSubs.unsubscribe()}}return e.\u0275fac=function(r){return new(r||e)(h.Gb(o.f),h.Gb(I.a),h.Gb(W.a))},e.\u0275cmp=h.Ab({type:e,selectors:[["app-trigger"]],inputs:{trigger:"trigger",triggerIndex:"triggerIndex"},outputs:{deletedTrigger:"deletedTrigger"},decls:43,vars:7,consts:[[1,"trigger"],[1,"table","table-hover"],["scope","col"],["scope","row"],[3,"click"],["aria-hidden","true",1,"bi","bi-eye-fill","primary"],["aria-hidden","true",1,"bi","bi-pencil-square","secondary"],["aria-hidden","true",1,"bi","bi-play-circle-fill","success"],["aria-hidden","true",1,"bi","bi-archive-fill","danger"]],template:function(e,r){1&e&&(h.Lb(0,"div",0),h.Lb(1,"table",1),h.Lb(2,"thead"),h.Lb(3,"tr"),h.Lb(4,"th",2),h.oc(5,"#"),h.Kb(),h.Lb(6,"th",2),h.oc(7,"Name"),h.Kb(),h.Lb(8,"th",2),h.oc(9,"Process"),h.Kb(),h.Lb(10,"th",2),h.oc(11,"Profile"),h.Kb(),h.Lb(12,"th",2),h.oc(13,"Server"),h.Kb(),h.Lb(14,"th",2),h.oc(15,"View"),h.Kb(),h.Lb(16,"th",2),h.oc(17,"Edit"),h.Kb(),h.Lb(18,"th",2),h.oc(19,"Run"),h.Kb(),h.Lb(20,"th",2),h.oc(21,"Delete"),h.Kb(),h.Kb(),h.Kb(),h.Lb(22,"tbody"),h.Lb(23,"tr"),h.Lb(24,"th",3),h.oc(25),h.Kb(),h.Lb(26,"td"),h.oc(27),h.Kb(),h.Lb(28,"td"),h.oc(29),h.Kb(),h.Lb(30,"td"),h.oc(31),h.Kb(),h.Lb(32,"td"),h.oc(33),h.Xb(34,"bpServerName"),h.Kb(),h.Lb(35,"td",4),h.Sb("click",function(){return r.ViewTrigger(r.trigger)}),h.Hb(36,"i",5),h.Kb(),h.Lb(37,"td",4),h.Sb("click",function(){return r.EditTrigger(r.trigger)}),h.Hb(38,"i",6),h.Kb(),h.Lb(39,"td",4),h.Sb("click",function(){return r.ExecuteTrigger(r.trigger)}),h.Hb(40,"i",7),h.Kb(),h.Lb(41,"td",4),h.Sb("click",function(){return r.DeleteTrigger(r.trigger)}),h.Hb(42,"i",8),h.Kb(),h.Kb(),h.Kb(),h.Kb(),h.Kb()),2&e&&(h.wb(25),h.pc(r.triggerIndex+1),h.wb(2),h.pc(r.trigger.triggerName),h.wb(2),h.pc(r.trigger.processName),h.wb(2),h.pc(r.trigger.processType),h.wb(2),h.pc(h.Yb(34,5,r.trigger.server)))},pipes:[M],styles:[".trigger[_ngcontent-%COMP%]{margin:15px 30px;background-color:#eee;transition-duration:.3s;border-radius:25px!important;box-shadow:4px 3px 8px 0 grey;border:3px solid var(--color-secondary)}.trigger[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:4px 3px 11px 6px grey}"]}),e})(),V=(()=>{class e{constructor(e){this._commonService=e}transform(e){return this._commonService.searchBoxTypedKeywords="",Object(s.a)([e,this._commonService.searchBoxKeywords$]).pipe(Object(p.a)(([e,r])=>{let t=[];return""==r?t=e:e.forEach(e=>{const i=Object.values(e);for(var o in i)if((null==i[o]?"":i[o]).toString().toUpperCase().includes(r.toUpperCase())){t.push(e);break}}),t}))}}return e.\u0275fac=function(r){return new(r||e)(h.Gb(D.a))},e.\u0275pipe=h.Fb({name:"filterBpTriggers",type:e,pure:!0}),e})();function z(e,r){if(1&e){const e=h.Mb();h.Lb(0,"app-trigger",8),h.Sb("deletedTrigger",function(r){return h.jc(e),h.Wb(3).onTriggerDelete(r)}),h.Kb()}if(2&e){const e=r.index;h.cc("trigger",r.$implicit)("triggerIndex",e)}}function U(e,r){1&e&&(h.Lb(0,"h4"),h.oc(1," No Trigger found as per the searched keyword. Try with some different keyword. "),h.Kb())}function J(e,r){1&e&&(h.Lb(0,"h4"),h.oc(1," No Trigger found to display "),h.Kb())}function Z(e,r){if(1&e&&(h.Jb(0),h.mc(1,z,1,2,"app-trigger",4),h.Lb(2,"div",5),h.Hb(3,"div",6),h.Lb(4,"div",7),h.mc(5,U,2,0,"h4",3),h.Xb(6,"json"),h.Xb(7,"json"),h.mc(8,J,2,0,"h4",3),h.Xb(9,"json"),h.Kb(),h.Hb(10,"div",6),h.Kb(),h.Ib()),2&e){const e=r.ngIf,t=h.Wb().ngIf;h.wb(1),h.cc("ngForOf",e),h.wb(4),h.cc("ngIf",!("[]"==h.Yb(6,3,t))&&"[]"==h.Yb(7,5,e)),h.wb(3),h.cc("ngIf","[]"==h.Yb(9,7,t))}}function Q(e,r){if(1&e&&(h.Lb(0,"div",2),h.mc(1,Z,11,9,"ng-container",3),h.Xb(2,"async"),h.Xb(3,"filterBpTriggers"),h.Kb()),2&e){const e=h.Wb();h.wb(1),h.cc("ngIf",h.Yb(2,1,h.Yb(3,3,e.allTriggers$)))}}function ee(e,r){1&e&&(h.Lb(0,"app-spinner",9),h.oc(1),h.Kb()),2&e&&(h.cc("spinnerColor","#428bca")("spinnerSize","1.5rem"),h.wb(1),h.pc(" Fetching data from backend....."))}function re(e,r){1&e&&(h.Lb(0,"app-spinner",9),h.oc(1),h.Kb()),2&e&&(h.cc("spinnerColor","#428bca")("spinnerSize","1.5rem"),h.wb(1),h.pc(" Checking for search keyword from search box....."))}let te=(()=>{class e{constructor(e,r){this._commonService=e,this._triggerService=r}ngOnInit(){this.allTriggers$=this._triggerService.GetAllTriggers()}onTriggerDelete(e){this.ngOnInit()}ngOnDestroy(){this._commonService.searchBoxTypedKeywords=""}}return e.\u0275fac=function(r){return new(r||e)(h.Gb(D.a),h.Gb(I.a))},e.\u0275cmp=h.Ab({type:e,selectors:[["app-list-trigger"]],decls:8,vars:13,consts:[["class","list-trigger",4,"ngIf"],[3,"spinnerColor","spinnerSize",4,"ngIf"],[1,"list-trigger"],[4,"ngIf"],[3,"trigger","triggerIndex","deletedTrigger",4,"ngFor","ngForOf"],[1,"no-matching-trigger","row"],[1,"col-md-2"],[1,"col-md-8"],[3,"trigger","triggerIndex","deletedTrigger"],[3,"spinnerColor","spinnerSize"]],template:function(e,r){1&e&&(h.mc(0,Q,4,5,"div",0),h.Xb(1,"async"),h.mc(2,ee,2,3,"app-spinner",1),h.Xb(3,"async"),h.mc(4,re,2,3,"app-spinner",1),h.Xb(5,"async"),h.Xb(6,"async"),h.Xb(7,"filterBpTriggers")),2&e&&(h.cc("ngIf",h.Yb(1,3,r.allTriggers$)),h.wb(2),h.cc("ngIf",!h.Yb(3,5,r.allTriggers$)),h.wb(2),h.cc("ngIf",h.Yb(5,7,r.allTriggers$)&&!h.Yb(6,9,h.Yb(7,11,r.allTriggers$))))},directives:[i.n,i.m,R,S.a],pipes:[i.b,V,i.g],styles:[".list-trigger[_ngcontent-%COMP%]   .no-matching-trigger[_ngcontent-%COMP%]{margin-top:30px}"]}),e})();const ie=function(e,r){return{"form-valid":e,"form-invalid":r}};function oe(e,r){if(1&e){const e=h.Mb();h.Lb(0,"div",11),h.Lb(1,"button",31),h.Sb("click",function(){return h.jc(e),h.Wb(3).addProcessInput("","")}),h.oc(2," Add new Input "),h.Kb(),h.Kb()}if(2&e){const e=h.Wb(3);h.wb(1),h.cc("disabled",e.viewOrEditTriggerForm.invalid)("ngClass",h.fc(2,ie,!e.viewOrEditTriggerForm.invalid,e.viewOrEditTriggerForm.invalid))}}function se(e,r){if(1&e){const e=h.Mb();h.Lb(0,"div",32),h.Lb(1,"div",25),h.Lb(2,"div",33),h.Hb(3,"textarea",34),h.Kb(),h.Lb(4,"div",35),h.Hb(5,"textarea",36),h.Kb(),h.Lb(6,"div",37),h.Lb(7,"button",38),h.Sb("click",function(){h.jc(e);const t=r.index;return h.Wb(3).deleteProcessInput(t)}),h.Kb(),h.Kb(),h.Kb(),h.Kb()}if(2&e){const e=r.index,t=h.Wb(2).ngIf;h.cc("formGroupName",e),h.wb(3),h.cc("readonly","view"==t.mode),h.wb(2),h.cc("readonly","view"==t.mode),h.wb(2),h.cc("disabled","view"==t.mode)}}function ce(e,r){if(1&e){const e=h.Mb();h.Lb(0,"div",39),h.Lb(1,"button",40),h.Sb("click",function(){h.jc(e);const r=h.Wb().ngIf;return h.Wb(2).UpdateTrigger(r.id)}),h.oc(2," Update "),h.Kb(),h.Kb()}if(2&e){const e=h.Wb(3);h.wb(1),h.cc("disabled",e.viewOrEditTriggerForm.invalid)("ngClass",h.fc(2,ie,!e.viewOrEditTriggerForm.invalid,e.viewOrEditTriggerForm.invalid))}}function ne(e,r){if(1&e&&(h.Lb(0,"div",3),h.Lb(1,"form",4),h.Lb(2,"div",5),h.Hb(3,"div",6),h.Lb(4,"div",7),h.Lb(5,"div",5),h.Lb(6,"div",8),h.Lb(7,"label",9),h.oc(8,"Trigger Name"),h.Kb(),h.Hb(9,"input",10),h.Kb(),h.Lb(10,"div",11),h.Lb(11,"div",12),h.Lb(12,"div",13),h.Lb(13,"label",14),h.oc(14,"Server Name"),h.Kb(),h.Hb(15,"input",15),h.Kb(),h.Kb(),h.Lb(16,"div",16),h.Lb(17,"label",17),h.oc(18,"Process Type"),h.Kb(),h.Hb(19,"input",18),h.Kb(),h.Kb(),h.Lb(20,"div",11),h.Lb(21,"div",12),h.Lb(22,"div",19),h.Lb(23,"label",20),h.oc(24,"Blue Prism Version"),h.Kb(),h.Hb(25,"input",21),h.Kb(),h.Kb(),h.Lb(26,"div",22),h.Lb(27,"label",23),h.oc(28,"Process Name"),h.Kb(),h.Hb(29,"input",24),h.Kb(),h.Kb(),h.Kb(),h.Lb(30,"div",25),h.Lb(31,"div",11),h.Lb(32,"div",26),h.oc(33,"Process Inputs"),h.Kb(),h.Kb(),h.mc(34,oe,3,5,"div",27),h.Kb(),h.Lb(35,"div",5),h.Lb(36,"div",28),h.mc(37,se,8,4,"div",29),h.Kb(),h.Kb(),h.mc(38,ce,3,5,"div",30),h.Kb(),h.Hb(39,"div",6),h.Kb(),h.Kb(),h.Kb()),2&e){const e=h.Wb().ngIf,r=h.Wb();h.wb(1),h.cc("formGroup",r.viewOrEditTriggerForm),h.wb(8),h.cc("readonly","view"==e.mode),h.wb(25),h.cc("ngIf","edit"==e.mode),h.wb(3),h.cc("ngForOf",r.formsArr.controls),h.wb(1),h.cc("ngIf",!("view"==e.mode))}}function ae(e,r){if(1&e&&(h.Lb(0,"div",1),h.mc(1,ne,40,5,"div",2),h.Xb(2,"async"),h.Kb()),2&e){const e=h.Wb();h.wb(1),h.cc("ngIf",h.Yb(2,1,e.trigger$))}}const be=[{path:"",redirectTo:"view-all",pathMatch:"full"},{path:"create",component:q},{path:":id/:mode",component:(()=>{class e{constructor(e,r,t,i){this._router=e,this._route=r,this._formBuilder=t,this._triggersService=i}ngOnInit(){this.routeParams$=this._route.params,this.viewOrEditTriggerForm=new u(this._formBuilder).InitForm(),this.trigger$=this._triggersService.trigger$.pipe(Object(c.a)(e=>{if(null==e?void 0:e.id){this.viewOrEditTriggerForm.patchValue(e),this.viewOrEditTriggerForm.controls.server.patchValue(Object.assign({},e.server));for(let r=0;r<e.processInputs.length;r++){let t=e.processInputs[r];this.addProcessInput(t.name,t.value)}}else this._router.navigate([f.a.getRoutePathByName("trigger-view-all")])}))}get formsArr(){return this.viewOrEditTriggerForm.get("processInputs")}addProcessInput(e,r){this.formsArr.push(new u(this._formBuilder).initProcessInputRows(e,r))}deleteProcessInput(e){this.formsArr.removeAt(e)}UpdateTrigger(e){console.log(this.viewOrEditTriggerForm.value),this._triggersService.UpdateTrigger(e,this.viewOrEditTriggerForm.value).subscribe(e=>{console.log(e),this._router.navigate([f.a.getRoutePathByName("trigger-view-all")])})}}return e.\u0275fac=function(r){return new(r||e)(h.Gb(o.f),h.Gb(o.a),h.Gb(m.d),h.Gb(I.a))},e.\u0275cmp=h.Ab({type:e,selectors:[["app-view-or-edit-trigger"]],decls:2,vars:3,consts:[["class","schedule-proceses",4,"ngIf"],[1,"schedule-proceses"],["class","form-wrapper mt-3",4,"ngIf"],[1,"form-wrapper","mt-3"],[3,"formGroup"],[1,"row"],[1,"col-md-1"],[1,"col-md-10"],[1,"form-group","triggerName"],["for","trigger",1,"form-label","required"],["type","text","id","triggerName","formControlName","triggerName",1,"form-control","highlight",3,"readonly"],[1,"col-md-6"],["formGroupName","server"],[1,"form-group","serverName"],["for","serverName",1,"form-label","required"],["readonly","","type","text","id","serverName","name","serverName","formControlName","serverName",1,"form-control","highlight"],[1,"form-group","processType"],["for","processType",1,"form-label","required"],["readonly","","type","text","id","processType","name","processType","formControlName","processType",1,"form-control","highlight"],[1,"form-group","version"],["for","version",1,"form-label","required"],["readonly","","id","version","name","version","formControlName","version",1,"form-control","highlight"],[1,"form-group","processName"],["for","processName",1,"form-label","required"],["readonly","","id","processName","name","processName","formControlName","processName",1,"form-control","highlight"],[1,"row","form-group"],[1,"form-heading"],["class","col-md-6",4,"ngIf"],["formArrayName","processInputs",1,"form-group"],["class","form-group",3,"formGroupName",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],["type","button",1,"btn","btn-success","pull-right",3,"disabled","ngClass","click"],[1,"form-group",3,"formGroupName"],[1,"col-sm-4"],["type","text","formControlName","name",1,"form-control","highlight",3,"readonly"],[1,"col-sm-7"],["formControlName","value",1,"form-control","highlight",3,"readonly"],[1,"col-sm-1"],[1,"btn","btn-danger","fa","fa-remove","text-center",3,"disabled","click"],[1,"form-group"],["type","submit",1,"btn","btn-primary",3,"disabled","ngClass","click"]],template:function(e,r){1&e&&(h.mc(0,ae,3,3,"div",0),h.Xb(1,"async")),2&e&&h.cc("ngIf",h.Yb(1,1,r.routeParams$))},directives:[i.n,m.s,m.j,m.f,m.b,m.i,m.e,m.g,m.c,i.m,i.l],pipes:[i.b],styles:[""]}),e})()},{path:"view-all",component:te}];let ge=(()=>{class e{}return e.\u0275mod=h.Eb({type:e}),e.\u0275inj=h.Db({factory:function(r){return new(r||e)},imports:[[o.i.forChild(be)],o.i]}),e})();var le=t("PCNd");let pe=(()=>{class e{}return e.\u0275mod=h.Eb({type:e}),e.\u0275inj=h.Db({factory:function(r){return new(r||e)},imports:[[i.c,o.i,m.n,ge,le.a],o.i]}),e})()}}]);